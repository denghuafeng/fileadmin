var youngli=youngli||{};var string=string||{};string.trim=function(b){return String(b).replace(new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g"),"")};string.toCamelCase=function(b){return String(b).replace(/[-_]\D/g,function(a){return a.charAt(1).toUpperCase()})};var toCameCase=string.toCamelCase;var trim=string.trim;var browser=browser||{};if(/chrome\/(\d+\.\d)/i.test(navigator.userAgent)){browser.chrome=parseFloat(RegExp["\x241"])}if(/firefox\/(\d+\.\d)/i.test(navigator.userAgent)){browser.firefox=parseFloat(RegExp["\x241"])}if(/msie (\d+\.\d)/i.test(navigator.userAgent)){ie=browser.ie=parseFloat(RegExp["\x241"])}browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);browser.isStrict=document.compatMode=="CSS1Compat";browser.isWebkit=/webkit/i.test(navigator.userAgent);try{if(/(\d+\.\d)/.test(external.max_version)){browser.maxthon=parseFloat(RegExp["\x241"])}}catch(e){}if(/opera\/(\d+\.\d)/i.test(navigator.userAgent)){browser.opera=parseFloat(RegExp["\x241"])}if((/(\d+\.\d)(\.\d)?\s+safari/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent))){browser.safari=parseFloat(RegExp["\x241"])}var dom=dom||{};dom.g=function(b){if("string"==typeof b||b instanceof String){return document.getElementById(b)}else{if(b&&b.nodeName&&(b.nodeType==1||b.nodeType==9)){return b}}return null};var g=dom.g;dom.addClass=function(k,j){k=g(k);var f=trim(j).split(/\s+/),h=f.length;j=k.className.split(/\s+/).join(" ");while(h--){(new RegExp("(^| )"+f[h]+"( |\x24)")).test(j)&&f.splice(h,1)}k.className=trim(j+" "+f.join(" "));return k};dom.children=function(d){d=g(d);for(var f=[],h=d.firstChild;h;h=h.nextSibling){if(h.nodeType==1){f.push(h)}}return f};dom._styleFilter=dom._styleFilter||[];dom._styleFilter[dom._styleFilter.length]={set:function(d,c){if(c.constructor==Number&&!/zIndex|fontWeight|opacity|zoom|lineHeight/i.test(d)){c=c+"px"}return c}};dom._styleFixer=dom._styleFixer||{};dom._styleFixer.display=browser.ie&&browser.ie<7?{set:function(d,c){d=d.style;if(c=="inline-block"){d.display="inline";d.zoom=1}else{d.display=c}}}:browser.firefox&&browser.firefox<3?{set:function(d,c){d.style.display=c=="inline-block"?"-moz-inline-box":c}}:null;dom._styleFixer["float"]=browser.ie?"styleFloat":"cssFloat";dom._styleFixer.opacity=browser.ie?{get:function(d){var c=d.style.filter;c&&c.indexOf("opacity=")>=0?(parseFloat(c.match(/opacity=([^)]*)/)[1])/100)+"":"1"},set:function(f,h){var d=f.style;d.filter=(d.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(h==1?"":"alpha(opacity="+h*100+")");d.zoom=1}}:null;dom._styleFixer.textOverflow=(function(){var f={};function h(b){var a=b.length;if(a>0){a=b[a-1];b.length--}else{a=null}return a}function k(b,a){b[browser.firefox?"textContent":"innerText"]=a}function j(b,y,E){var o=browser.ie?b.currentStyle||b.style:getComputedStyle(b,null),F=o.fontWeight,G="font-family:"+o.fontFamily+";font-size:"+o.fontSize+";word-spacing:"+o.wordSpacing+";font-weight:"+((parseInt(F)||0)==401?700:F)+";font-style:"+o.fontStyle+";font-variant:"+o.fontVariant,B=f[G];if(!B){o=b.appendChild(document.createElement("div"));o.style.cssText="float:left;"+G;B=f[G]=[];for(c=0;c<256;c++){c==32?(o.innerHTML="&nbsp;"):k(o,String.fromCharCode(c));B[c]=o.offsetWidth}k(o,"一");B[256]=o.offsetWidth;k(o,"一一");B[257]=o.offsetWidth-B[256]*2;B[258]=B[".".charCodeAt(0)]*3+B[257]*3;b.removeChild(o)}for(var d=b.firstChild,a=B[256],z=B[257],A=B[258],C=[],E=E?A:0;d;d=d.nextSibling){if(y<E){b.removeChild(d)}else{if(d.nodeType==3){for(var c=0,D=d.nodeValue,x=D.length;c<x;c++){o=D.charCodeAt(c);C[C.length]=[y,d,c];y-=(c?z:0)+(o<256?B[o]:a);if(y<E){break}}}else{o=d.tagName;if(o=="IMG"||o=="TABLE"){o=d;d=d.previousSibling;b.removeChild(o)}else{C[C.length]=[y,d];y-=d.offsetWidth}}}}if(y<E){while(o=h(C)){y=o[0];d=o[1];o=o[2];if(d.nodeType==3){if(y>=A){d.nodeValue=d.nodeValue.substring(0,o)+"...";return true}else{if(!o){b.removeChild(d)}}}else{if(j(d,y,true)){return true}else{b.removeChild(d)}}}b.innerHTML=""}}return{get:function(b,a){var c=c;return(c.opera?a.OTextOverflow:c.firefox?b._Overflow:a.textOverflow)||"clip"},set:function(d,b){var m=m;if(d.tagName=="TD"||d.tagName=="TH"||m.firefox){d._HTML&&(d.innerHTML=d._HTML);if(b=="ellipsis"){d._HTML=d.innerHTML;var a=document.createElement("div"),c=d.appendChild(a).offsetWidth;d.removeChild(a);j(d,c)}else{d._HTML=""}}a=d.style;m.opera?(a.OTextOverflow=b):m.firefox?(d._Overflow=b):(a.textOverflow=b)}}})();dom._styleFilter.filter=function(j,m,l){for(var k=0,n=dom._styleFilter,o;o=n[k];k++){if(o=o[l]){m=o(j,m)}}return m};dom.getStyle=function(m,h){m=dom.g(m);h=string.toCamelCase(h);var k=m.style[h];if(!k){var j=dom._styleFixer[h],l=m.currentStyle||(browser.ie?m.style:getComputedStyle(m,null));if("string"==typeof j){k=l[j]}else{if(j&&j.get){k=j.get(m,l)}else{k=l[h]}}}if(j=dom._styleFilter){k=j.filter(h,k,"get")}return k};dom.remove=function(d){d=dom.g(d);if("HTML BODY HEAD".indexOf(d.nodeName)==-1){if(browser.ie){var c=document.createElement("DIV");c.appendChild(d);c.innerHTML=""}else{(c=d.parentNode)&&c.removeChild(d)}}};dom.removeClass=function(d,h){d=dom.g(d);var f=string.trim;d.className=f(d.className.split(/\s+/).join("  ").replace(new RegExp("(^| )("+f(h).split(/\s+/).join("|")+")( |\x24)","g")," ").replace(/\s+/g," "));return d};dom.setStyle=function(k,f,j){var h;k=dom.g(k);f=string.toCamelCase(f);if(h=dom._styleFilter){j=h.filter(f,j,"set")}h=dom._styleFixer[f];(h&&h.set)?h.set(k,j):(k.style[h||f]=j);return k};dom.setStyles=function(d,h){d=dom.g(d);for(var f in h){dom.setStyle(d,f,h[f])}return d};var ajax=ajax||{};ajax.form=function(O,M){M=M||{};var J=O.elements,C=J.length,N=O.getAttribute("method"),K=O.getAttribute("action"),w=M.replacer||function(a,b){return a},z={},x=[],E,A,y,D,L,I,H,F,G;function B(b,a){x.push(b+"="+a)}for(E in M){if(M.hasOwnProperty(E)){z[E]=M[E]}}for(E=0;E<C;E++){A=J[E];D=A.name;if(!A.disabled&&D){y=A.type;L=A.value;switch(y){case"radio":case"checkbox":if(!A.checked){break}case"textarea":case"text":case"password":case"hidden":case"select-one":B(D,w(L,D));break;case"select-multiple":I=A.options;F=I.length;for(H=0;H<F;H++){G=I[H];if(G.selected){B(D,w(G.value,D))}}break}}}z.data=x.join("&");z.method=O.getAttribute("method")||"POST";return ajax.request(K,z)};ajax.get=function(c,d){return ajax.request(c,{onsuccess:d})};ajax.post=function(d,h,f){return ajax.request(d,{onsuccess:f,method:"POST",data:h})};ajax.request=function(D,s){function x(){if(t.readyState==4){try{var a=t.status}catch(b){C("failure");return}C(a);if((a>=200&&a<300)||a==304||a==1223){C("success")}else{C("failure")}window.setTimeout(function(){t.onreadystatechange=new Function();if(A){t=null}},0)}}function E(){if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}}if(window.XMLHttpRequest){return new XMLHttpRequest()}}function C(b){b="on"+b;var c=F[b],a=ajax[b];if(c){if(b!="onsuccess"){c(t)}else{c(t,t.responseText)}}else{if(a){if(b=="onsuccess"){return}a(t)}}}s=s||{};var y=s.data||"",A=!(s.async===false),z=s.username||"",u=s.password||"",G=(s.method||"GET").toUpperCase(),B=s.headers||{},F={},v,t;for(v in s){F[v]=s[v]}B["X-Request-By"]="ajax";try{t=E();if(G=="GET"){D+=(D.indexOf("?")>=0?"&":"?");if(y){D+=y+"&";y=null}D+="b"+(new Date()).getTime()+"=1"}if(z){t.open(G,D,A,z,u)}else{t.open(G,D,A)}if(A){t.onreadystatechange=x}if(G=="POST"){t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}for(v in B){if(B.hasOwnProperty(v)){t.setRequestHeader(v,B[v])}}C("beforerequest");t.send(y);if(!A){x()}}catch(w){C("failure")}return t};var event=event||{};event._listeners=event._listeners||[];event.on=function(h,l,k){l=l.replace(/^on/i,"");if("string"==typeof h){h=g(h)}var m=function(a){k.call(h,a)},j=event._listeners;j[j.length]=[h,l,k,m];if(h.addEventListener){h.addEventListener(l,m,false)}else{if(h.attachEvent){h.attachEvent("on"+l,m)}}return h};event.on=event.on||{};event._unload=function(){var m=event._listeners,j=m.length,h=!!window.removeEventListener,k,l;while(j--){k=m[j];l=k[0];if(l.removeEventListener){l.removeEventListener(k[1],k[3],false)}else{if(l.detachEvent){l.detachEvent("on"+k[1],k[3])}}}if(h){window.removeEventListener("unload",event._unload,false)}else{window.detachEvent("onunload",event._unload)}};if(window.attachEvent){window.attachEvent("onunload",event._unload)}else{window.addEventListener("unload",event._unload,false)}function Event(b){b=b||window.event;this.target=b.target||b.srcElement;_extend(this,b);this.keyCode=b.which?b.which:b.keyCode;this.rightClick=(b.which==3)||(b.button==2)}Event.add=function(d,f,h){if(window.addEventListener){d.addEventListener(f,h,false)}else{d.attachEvent("on"+f,h)}};Event.remove=function(d,f,h){if(window.removeEventListener){d.removeEventListener(f,h,false)}else{d.detachEvent("on"+f,h)}};var array=array||{};array.each=function(l,n){var o,m,j,k=l.length;if("function"==typeof n){for(j=0;j<k;j++){m=l[j];o=n.call(l,m,j);if(o===false){break}}}return l};array.filter=function(m,o){var q=[],k=0,l=m.length,n,p;if("function"==typeof o){for(p=0;p<l;p++){n=m[p];if(true===o.call(m,n,p)){q[k++]=n}}}return q};array.find=function(k,m){var l,h,j=k.length;if("function"==typeof m){for(h=0;h<j;h++){l=k[h];if(true===m.call(k,l,h)){return l}}}return null};array.indexOf=function(l,k,h){var j=l.length,m=k;h=Number(h)||0;h=h<0?Math.ceil(h):Math.floor(h);h=Math.min(Math.max(h,0),j);if("function"!=typeof k){m=function(a){return k===a}}for(;h<j;h++){if(true===m.call(l,l[h],h)){return h}}return -1};array.lastIndexOf=function(k,j){var h=k.length,f=j;if("function"!=typeof j){f=function(a){return j===a}}while(h--){if(true===f.call(k,k[h],h)){return h}}return -1};array.remove=function(k,j){var h=k.length,f=j;if("function"!=typeof j){f=function(a){return j===a}}while(h--){if(true===f.call(k,k[h],h)){k.splice(h,1)}}};array.removeAt=function(c,d){return c.splice(d,1)[0]};array.unique=function(m,l){var j=m.length,k=m.slice(0),n,o;if("function"!=typeof l){l=function(a,b){return a===b}}while(--j>0){o=k[j];n=j-1;while(n--){if(l(o,k[n])){k.splice(j,1);break}}}return k};dhtmlx=function(d){for(var a in d){dhtmlx[a]=d[a]}return dhtmlx};dhtmlx.extend_api=function(h,j,k){var f=window[h];if(!f){return}window[h]=function(a){if(a&&typeof a=="object"&&!a.tagName&&!(a instanceof Array)){var b=f.apply(this,(j._init?j._init(a):arguments));for(var c in dhtmlx){if(j[c]){this[j[c]](dhtmlx[c])}}for(var c in a){if(j[c]){this[j[c]](a[c])}else{if(c.indexOf("on")==0){this.attachEvent(c,a[c])}}}}else{var b=f.apply(this,arguments)}if(j._patch){j._patch(this)}return b||this};window[h].prototype=f.prototype;if(k){dhtmlXHeir(window[h].prototype,k)}};dhtmlxAjax={get:function(f,h){var d=new dtmlXMLLoaderObject(true);d.async=(arguments.length<3);d.waitCall=h;d.loadXML(f);return d},post:function(h,k,j){var f=new dtmlXMLLoaderObject(true);f.async=(arguments.length<4);f.waitCall=j;f.loadXML(h,true,k);return f},getSync:function(b){return this.get(b,null,true)},postSync:function(d,c){return this.post(d,c,null,true)}};function dtmlXMLLoaderObject(f,j,k,h){this.xmlDoc="";if(typeof(k)!="undefined"){this.async=k}else{this.async=true}this.onloadAction=f||null;this.mainObject=j||null;this.waitCall=null;this.rSeed=h||false;return this}dtmlXMLLoaderObject.prototype.waitLoadFunction=function(c){var d=true;this.check=function(){if((c)&&(c.onloadAction!=null)){if((!c.xmlDoc.readyState)||(c.xmlDoc.readyState==4)){if(!d){return}d=false;if(typeof c.onloadAction=="function"){c.onloadAction(c.mainObject,null,null,null,c)}if(c.waitCall){c.waitCall.call(this,c);c.waitCall=null}}}};return this.check};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(m,j){if(this.xmlDoc.responseXML){var h=this.xmlDoc.responseXML.getElementsByTagName(m);if(h.length==0&&m.indexOf(":")!=-1){var h=this.xmlDoc.responseXML.getElementsByTagName((m.split(":"))[1])}var k=h[0]}else{var k=this.xmlDoc.documentElement}if(k){this._retry=false;return k}if((_isIE)&&(!this._retry)){var l=this.xmlDoc.responseText;var j=this.xmlDoc;this._retry=true;this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=false;this.xmlDoc.loadXML(l);return this.getXMLTopNode(m,j)}dhtmlxError.throwError("LoadXML","Incorrect XML",[(j||this.xmlDoc),this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(d){try{var h=new DOMParser();this.xmlDoc=h.parseFromString(d,"text/xml")}catch(f){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=this.async;this.xmlDoc.loadXML(d)}this.onloadAction(this.mainObject,null,null,null,this);if(this.waitCall){this.waitCall();this.waitCall=null}};dtmlXMLLoaderObject.prototype.loadXML=function(k,f,h,j){if(this.rSeed){k+=((k.indexOf("?")!=-1)?"&":"?")+"a_dhx_rSeed="+(new Date()).valueOf()}this.filePath=k;if((!_isIE)&&(window.XMLHttpRequest)){this.xmlDoc=new XMLHttpRequest()}else{if(document.implementation&&document.implementation.createDocument){this.xmlDoc=document.implementation.createDocument("","",null);this.xmlDoc.onload=new this.waitLoadFunction(this);this.xmlDoc.load(k);return}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP")}}if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)}this.xmlDoc.open(f?"POST":"GET",k,this.async);if(j){this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")");this.xmlDoc.setRequestHeader("Content-type","text/xml")}else{if(f){this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded")}}this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(null||h);if(!this.async){(new this.waitLoadFunction(this))()}};dtmlXMLLoaderObject.prototype.destructor=function(){this.onloadAction=null;this.mainObject=null;this.xmlDoc=null;return null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(j){var k={};for(var f=0;f<j.attributes.length;f++){k[j.attributes[f].name]=j.attributes[f].value}k._tagvalue=j.firstChild?j.firstChild.nodeValue:"";for(var f=0;f<j.childNodes.length;f++){var h=j.childNodes[f].tagName;if(h){if(!k[h]){k[h]=[]}k[h].push(this.xmlNodeToJSON(j.childNodes[f]))}}return k};function callerFunction(d,c){this.handler=function(a){if(!a){a=window.event}d(a,c);return true};return this.handler}function getAbsoluteLeft(b){return getOffset(b).left}function getAbsoluteTop(b){return getOffset(b).top}function getOffsetSum(f){var h=0,d=0;while(f){h=h+parseInt(f.offsetTop);d=d+parseInt(f.offsetLeft);f=f.offsetParent}return{top:h,left:d}}function getOffsetRect(t){var q=t.getBoundingClientRect();var p=document.body;var v=document.documentElement;var w=window.pageYOffset||v.scrollTop||p.scrollTop;var s=window.pageXOffset||v.scrollLeft||p.scrollLeft;var r=v.clientTop||p.clientTop||0;var o=v.clientLeft||p.clientLeft||0;var n=q.top+w-r;var u=q.left+s-o;return{top:Math.round(n),left:Math.round(u)}}function getOffset(b){if(b.getBoundingClientRect&&!_isChrome){return getOffsetRect(b)}else{return getOffsetSum(b)}}function convertStringToBoolean(b){if(typeof(b)=="string"){b=b.toLowerCase()}switch(b){case"1":case"true":case"yes":case"y":case 1:case true:return true;break;default:return false}}function getUrlSymbol(b){if(b.indexOf("?")!=-1){return"&"}else{return"?"}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(b){b.onmousedown=null;b.dragStarter=null;b.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(d,c){d.onmousedown=this.preCreateDragCopy;d.dragStarter=c;this.addDragLanding(d,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(d,c){d.dragLanding=c};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(b){if((b||event)&&(b||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((b)&&(b.preventDefault)){b.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(m){if(!m){m=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if((m.button==0)&&(_isIE)){return dragger.stopDrag()}if(!dragger.dragNode&&dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,m);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body){var j=dragger.gldragNode;if(dragger.gldragNode.old){j=dragger.gldragNode.old}j.parentNode.removeChild(j);var h=dragger.dragNode.pWindow;if(_isIE){var k=document.createElement("Div");k.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=k.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);h.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=m.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=m.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!m.srcElement){var l=m.target}else{l=m.srcElement}dragger.checkLanding(l,m)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(k){if(window.name){var m=parent.frames[window.name].frameElement.offsetParent;var l=0;var h=0;while(m){l+=m.offsetLeft;h+=m.offsetTop;m=m.offsetParent}if((parent.dhtmlDragAndDrop)){var j=parent.dhtmlDragAndDrop.calculateFramePosition(1);l+=j.split("_")[0]*1;h+=j.split("_")[1]*1}if(k){return l+"_"+h}else{this.fx=l}this.fy=h}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(c,d){if((c)&&(c.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=c;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,d.clientX,d.clientY,d);this.lastLanding_scr=(_isIE?d.srcElement:d.target)}else{if((c)&&(c.tagName!="BODY")){this.checkLanding(c.parentNode,d)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,d.clientX,d.clientY,d)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(d,h){dragger=window.dhtmlDragAndDrop;if(!h){dragger.stopFrameRoute();var f=dragger.lastLanding;dragger.lastLanding=null;if(f){f.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,f,(_isIE?event.srcElement:d.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(h){if(h){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var f=0;f<window.frames.length;f++){try{if((window.frames[f]!=h)&&(window.frames[f].dhtmlDragAndDrop)){window.frames[f].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(d){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=h)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(d){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(k,j){if(k){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=k.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=k.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=k.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=k.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(j))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=k)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(f){}for(var h=0;h<window.frames.length;h++){try{if((window.frames[h]!=k)&&(window.frames[h].dhtmlDragAndDrop)){window.frames[h].dhtmlDragAndDrop.initFrameRoute(window,((!k||j)?1:0))}}catch(f){}}};var _isFF=false;var _isIE=false;var _isOpera=false;var _isKHTML=false;var _isMacOS=false;var _isChrome=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){var _KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;var _FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){_isIE=8}}else{_isFF=true;var _FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}dtmlXMLLoaderObject.prototype.doXPath=function(s,q,r,m){if(_isKHTML||(!_isIE&&!window.XPathResult)){return this.doXPathOpera(s,q)}if(_isIE){if(!q){if(!this.xmlDoc.nodeName){q=this.xmlDoc.responseXML}else{q=this.xmlDoc}}if(!q){dhtmlxError.throwError("LoadXML","Incorrect XML",[(q||this.xmlDoc),this.mainObject])}if(r!=null){q.setProperty("SelectionNamespaces","xmlns:xsl='"+r+"'")}if(m=="single"){return q.selectSingleNode(s)}else{return q.selectNodes(s)||new Array(0)}}else{var u=q;if(!q){if(!this.xmlDoc.nodeName){q=this.xmlDoc.responseXML}else{q=this.xmlDoc}}if(!q){dhtmlxError.throwError("LoadXML","Incorrect XML",[(q||this.xmlDoc),this.mainObject])}if(q.nodeName.indexOf("document")!=-1){u=q}else{u=q;q=q.ownerDocument}var o=XPathResult.ANY_TYPE;if(m=="single"){o=XPathResult.FIRST_ORDERED_NODE_TYPE}var p=new Array();var t=q.evaluate(s,u,function(a){return r},o,null);if(o==XPathResult.FIRST_ORDERED_NODE_TYPE){return t.singleNodeValue}var n=t.iterateNext();while(n){p[p.length]=n;n=t.iterateNext()}return p}};function _dhtmlxError(d,f,h){if(!this.catches){this.catches=new Array()}return this}_dhtmlxError.prototype.catchError=function(c,d){this.catches[c]=d};_dhtmlxError.prototype.throwError=function(d,f,h){if(this.catches[d]){return this.catches[d](d,f,h)}if(this.catches.ALL){return this.catches.ALL(d,f,h)}alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]);return null};window.dhtmlxError=new _dhtmlxError();dtmlXMLLoaderObject.prototype.doXPathOpera=function(m,j){var k=m.replace(/[\/]+/gi,"/").split("/");var l=null;var h=1;if(!k.length){return[]}if(k[0]=="."){l=[j]}else{if(k[0]==""){l=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(k[h].replace(/\[[^\]]*\]/g,""));h++}else{return[]}}for(h;h<k.length;h++){l=this._getAllNamedChilds(l,k[h])}if(k[h-1].indexOf("[")!=-1){l=this._filterXPath(l,k[h-1])}return l};dtmlXMLLoaderObject.prototype._filterXPath=function(c,k){var a=new Array();var k=k.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var b=0;b<c.length;b++){if(c[b].getAttribute(k)){a[a.length]=c[b]}}return a};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(j,m){var a=new Array();if(_isKHTML){m=m.toUpperCase()}for(var b=0;b<j.length;b++){for(var c=0;c<j[b].childNodes.length;c++){if(_isKHTML){if(j[b].childNodes[c].tagName&&j[b].childNodes[c].tagName.toUpperCase()==m){a[a.length]=j[b].childNodes[c]}}else{if(j[b].childNodes[c].tagName==m){a[a.length]=j[b].childNodes[c]}}}}return a};function dhtmlXHeir(b,c){for(var a in c){if(typeof(c[a])=="function"){b[a]=c[a]}}return b}function dhtmlxEvent(d,h,f){if(d.addEventListener){d.addEventListener(h,f,false)}else{if(d.attachEvent){d.attachEvent("on"+h,f)}}}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(f,k,j){if(!j){j=this.xslDoc}if(j.responseXML){j=j.responseXML}var h=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+f+"']",j,"http://www.w3.org/1999/XSL/Transform","single");if(h!=null){h.firstChild.nodeValue=k}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(j,f){if(!j){j=this.xslDoc}if(j.responseXML){j=j.responseXML}if(!f){f=this.xmlDoc}if(f.responseXML){f=f.responseXML}if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor();this.XSLProcessor.importStylesheet(j)}var h=this.XSLProcessor.transformToDocument(f)}else{var h=new ActiveXObject("Msxml2.DOMDocument.3.0");try{f.transformNodeToObject(j,h)}catch(k){h=f.transformNode(j)}}return h};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(h,d){var f=this.doXSLTransToObject(h,d);if(typeof(f)=="string"){return f}return this.doSerialization(f)};dtmlXMLLoaderObject.prototype.doSerialization=function(c){if(!c){c=this.xmlDoc}if(c.responseXML){c=c.responseXML}if(!_isIE){var d=new XMLSerializer();return d.serializeToString(c)}else{return c.xml}};dhtmlxEventable=function(obj){obj.dhx_SeverCatcherPath="";obj.attachEvent=function(name,catcher,callObj){name="ev_"+name.toLowerCase();if(!this[name]){this[name]=new this.eventCatcher(callObj||this)}return(name+":"+this[name].addEvent(catcher))};obj.callEvent=function(name,arg0){name="ev_"+name.toLowerCase();if(this[name]){return this[name].apply(this,arg0)}return true};obj.checkEvent=function(name){return(!!this["ev_"+name.toLowerCase()])};obj.eventCatcher=function(obj){var dhx_catch=[];var z=function(){var res=true;for(var i=0;i<dhx_catch.length;i++){if(dhx_catch[i]!=null){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr}}return res};z.addEvent=function(ev){if(typeof(ev)!="function"){ev=eval(ev)}if(ev){return dhx_catch.push(ev)-1}return false};z.removeEvent=function(id){dhx_catch[id]=null};return z};obj.detachEvent=function(id){if(id!=false){var list=id.split(":");this[list[0]].removeEvent(list[1])}}};function xmlPointer(b){this.d=b}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var b=new XMLSerializer();return b.serializeToString(this.d)},get:function(b){return this.d.getAttribute(b)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(o,f,m,n){var a=this.d.childNodes;var c=new xmlPointer();if(a.length){for(n=n||0;n<a.length;n++){if(a[n].tagName==o){c.d=a[n];if(f.apply(m,[c,n])==-1){return}}}}},get_all:function(){var b={};var h=this.d.attributes;for(var a=0;a<h.length;a++){b[h[a].name]=h[a].value}return b},sub:function(k){var a=this.d.childNodes;var c=new xmlPointer();if(a.length){for(var j=0;j<a.length;j++){if(a[j].tagName==k){c.d=a[j];return c}}}},up:function(b){return new xmlPointer(this.d.parentNode)},set:function(d,c){this.d.setAttribute(d,c)},clone:function(b){return new xmlPointer(this.d)},sub_exists:function(h){var a=this.d.childNodes;if(a.length){for(var f=0;f<a.length;f++){if(a[f].tagName==h){return true}}}return false},through:function(u,q,c,s,a){var p=this.d.childNodes;if(p.length){for(var t=0;t<p.length;t++){if(p[t].tagName==u&&p[t].getAttribute(q)!=null&&p[t].getAttribute(q)!=""&&(!c||p[t].getAttribute(q)==c)){var r=new xmlPointer(p[t]);s.apply(a,[r,t])}var f=this.d;this.d=p[t];this.through(u,q,c,s,a);this.d=f}}}};function dhtmlXTreeObject(l,n,j,k){if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(m){}}if(typeof(l)!="object"){this.parentObject=document.getElementById(l)}else{this.parentObject=l}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=n;this.height=j;this.rootId=k;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="18px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";if(_isIE){this.style_pointer="hand"}this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden"}var o=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(a){return o._doContClick(a||window.event)}}this.allTree.onmousedown=function(a){return o._doContClick(a||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(_isIE){this.preventIECashing(true)}if(window.addEventListener){window.addEventListener("unload",function(){try{o.destructor()}catch(a){}},false)}if(window.attachEvent){window.attachEvent("onunload",function(){try{o.destructor()}catch(a){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXTreeObject.prototype.setDataMode=function(b){this._datamode=b};dhtmlXTreeObject.prototype._doContClick=function(s){if(s.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu._contextEnd()}}return true}var l=(_isIE?s.srcElement:s.target);while((l)&&(l.tagName!="BODY")){if(l.parentObject){break}l=l.parentNode}if((!l)||(!l.parentObject)){return true}var q=l.parentObject;if(!this.callEvent("onRightClick",[q.id,s])){(s.srcElement||s.target).oncontextmenu=function(a){(a||event).cancelBubble=true;return false}}this._acMenu=(q.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[q.id]))){return true}(s.srcElement||s.target).oncontextmenu=function(a){(a||event).cancelBubble=true;return false};if(this._acMenu.showContextMenu){var o=window.document.documentElement;var r=window.document.body;var p=new Array((o.scrollLeft||r.scrollLeft),(o.scrollTop||r.scrollTop));if(_isIE){var m=s.clientX+p[0];var n=s.clientY+p[1]}else{var m=s.pageX;var n=s.pageY}this._acMenu.showContextMenu(m-1,n-1);this.contextID=q.id;s.cancelBubble=true;this._acMenu._skip_hide=true}else{l.contextMenuId=q.id;l.contextMenu=this._acMenu;l.a=this._acMenu._contextStart;l.a(l,s);l.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(b){if(!b){this._getImg=function(a){return document.createElement((a==this.rootId)?"div":"img")};this._setSrc=function(a,f){a.src=f};this._getSrc=function(a){return a.src}}else{this._getImg=function(){var a=document.createElement("DIV");a.innerHTML="&nbsp;";a.className="dhx_bg_img_fix";return a};this._setSrc=function(a,f){a.style.backgroundImage="url("+f+")"};this._getSrc=function(a){var d=a.style.backgroundImage;return d.substr(4,d.length-5)}}};dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var d=this._idpull[a];if(!d){continue}d.parentObject=null;d.treeNod=null;d.childNodes=null;d.span=null;d.tr.nodem=null;d.tr=null;d.htmlNode.objBelong=null;d.htmlNode=null;this._idpull[a]=null}this.parentObject.innerHTML="";if(this.XMLLoader){this.XMLLoader.destructor()}this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var a in this){this[a]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function b(){}b.prototype=this;return new b()};function dhtmlXTreeItemObject(l,j,o,k,n,m){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=k;this.label=j;this.parentObject=o;this.actionHandler=n;this.images=new Array(k.imageArray[0],k.imageArray[1],k.imageArray[2]);this.id=k._globalIdStorageAdd(l,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,m)}else{this.htmlNode=this.treeNod._createItem(0,this,m)}this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(c,d){if(this._globalIdStorageFind(c,1,1)){c=c+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(c,d)}this._idpull[c]=d;this._pullSize++;return c};dhtmlXTreeObject.prototype._globalIdStorageSub=function(b){if(this._idpull[b]){this._unselectItem(this._idpull[b]);this._idpull[b]=null;this._pullSize--}if((this._locker)&&(this._locker[b])){this._locker[b]=false}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(k,j,h,m){var l=this._idpull[k];if(l){return l}return null};dhtmlXTreeObject.prototype._escape=function(b){switch(this.utfesc){case"none":return b;break;case"utf8":return encodeURIComponent(b);break;default:return escape(b);break}};dhtmlXTreeObject.prototype._drawNewTr=function(k,m){var l=document.createElement("tr");var h=document.createElement("td");var j=document.createElement("td");h.appendChild(document.createTextNode(" "));j.colSpan=3;j.appendChild(k);l.appendChild(h);l.appendChild(j);return l};dhtmlXTreeObject.prototype.loadXMLString=function(h,d){var f=this;if(!this.parsCount){this.callEvent("onXLS",[f,null])}this.xmlstate=1;if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXMLString(h)};dhtmlXTreeObject.prototype.loadXML=function(f,h){if(this._datamode&&this._datamode!="xml"){return this["load"+this._datamode.toUpperCase()](f,h)}var d=this;if(!this.parsCount){this.callEvent("onXLS",[d,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(h){this.XMLLoader.waitCall=h}this.XMLLoader.loadXML(f)};dhtmlXTreeObject.prototype._attachChildNode=function(K,L,N,J,y,z,A,I,O,F,E){if(F&&F.parentObject){K=F.parentObject}if(((K.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){K.XMLload=1;this._loadDynXML(K.id)}var H=K.childsCount;var n=K.childNodes;if(E){if(E.tr.previousSibling.previousSibling){F=E.tr.previousSibling.nodem}else{I=I.replace("TOP","")+",TOP"}}if(F){var M,B;for(M=0;M<H;M++){if(n[M]==F){for(B=H;B!=M;B--){n[1+B]=n[B]}break}}M++;H=M}if(I){var D=I.split(",");for(var C=0;C<D.length;C++){switch(D[C]){case"TOP":if(K.childsCount>0){F=new Object;F.tr=K.childNodes[0].tr.previousSibling}K._has_top=true;for(M=H;M>0;M--){n[M]=n[M-1]}H=0;break}}}var G;if(!(G=this._idpull[L])||G.span!=-1){G=n[H]=new dhtmlXTreeItemObject(L,N,K,this,J,1);L=n[H].id;K.childsCount++}if(!G.htmlNode){G.label=N;G.htmlNode=this._createItem((this.checkBoxOff?1:0),G);G.htmlNode.objBelong=G}if(y){G.images[0]=y}if(z){G.images[1]=z}if(A){G.images[2]=A}var P=this._drawNewTr(G.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){G.htmlNode.parentNode.parentNode.style.display="none"}if((F)&&(F.tr.nextSibling)){K.htmlNode.childNodes[0].insertBefore(P,F.tr.nextSibling)}else{if(this.parsingOn==K.id){this.parsedArray[this.parsedArray.length]=P}else{K.htmlNode.childNodes[0].appendChild(P)}}if((F)&&(!F.span)){F=null}if(this.XMLsource){if((O)&&(O!=0)){G.XMLload=0}else{G.XMLload=1}}G.tr=P;P.nodem=G;if(K.itemId==0){P.childNodes[0].className="hiddenRow"}if((K._r_logic)||(this._frbtr)){this._setSrc(G.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(I){var D=I.split(",");for(var C=0;C<D.length;C++){switch(D[C]){case"SELECT":this.selectItem(L,false);break;case"CALL":this.selectItem(L,true);break;case"CHILD":G.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+L}else{this.setCheck(L,1)}break;case"HCHECKED":this._setCheck(G,"unsure");break;case"OPEN":G.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(K)<0)&&(!this._hAdI)){this.openItem(K.id)}if(F){this._correctPlus(F);this._correctLine(F)}this._correctPlus(K);this._correctLine(K);this._correctPlus(G);if(K.childsCount>=2){this._correctPlus(n[K.childsCount-2]);this._correctLine(n[K.childsCount-2])}if(K.childsCount!=2){this._correctPlus(n[0])}if(this.tscheck){this._correctCheckStates(K)}if(this._onradh){if(this.xmlstate==1){var Q=this.onXLE;this.onXLE=function(a){this._onradh(L);if(Q){Q(a)}}}else{this._onradh(L)}}}return G};dhtmlXTreeObject.prototype.insertNewItem=function(v,r,p,w,s,t,u,x,y){var o=this._globalIdStorageFind(v);if(!o){return(-1)}var q=this._attachChildNode(o,r,p,w,s,t,u,x,y);return q};dhtmlXTreeObject.prototype.insertNewChild=function(r,n,m,s,o,p,q,t,u){return this.insertNewItem(r,n,m,s,o,p,q,t,u)};dhtmlXTreeObject.prototype._parseXMLTree=function(n,o,a,b,d){var c=new xmlPointer(d.getXMLTopNode("tree"));n._parse(c);n._p=c};dhtmlXTreeObject.prototype._parseItem=function(t,p,u,r){var w;if(this._srnd&&(!this._idpull[w=t.get("id")]||!this._idpull[w].span)){this._addItemSRND(p.id,w,t);return}var s=t.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[s.id])){this._parse(t,s.id,1);return}var a=[];if(s.select){a.push("SELECT")}if(s.top){a.push("TOP")}if(s.call){this.nodeAskingCall=s.id}if(s.checked==-1){a.push("HCHECKED")}else{if(s.checked){a.push("CHECKED")}}if(s.open){a.push("OPEN")}if(this.waitUpdateXML){if(this._globalIdStorageFind(s.id)){var q=this.updateItem(s.id,s.text,s.im0,s.im1,s.im2,s.checked)}else{if(this.npl==0){a.push("TOP")}else{u=p.childNodes[this.npl]}var q=this._attachChildNode(p,s.id,s.text,0,s.im0,s.im1,s.im2,a.join(","),s.child,0,u);u=null}}else{var q=this._attachChildNode(p,s.id,s.text,0,s.im0,s.im1,s.im2,a.join(","),s.child,(r||0),u)}if(s.tooltip){q.span.parentNode.parentNode.title=s.tooltip}if(s.style){if(q.span.style.cssText){q.span.style.cssText+=(";"+s.style)}else{q.span.setAttribute("style",q.span.getAttribute("style")+"; "+s.style)}}if(s.radio){q._r_logic=true}if(s.nocheckbox){var c=q.span.parentNode.previousSibling.previousSibling;c.childNodes[0].style.display="none";if(window._KHTMLrv){c.style.display="none"}q.nocheckbox=true}if(s.disabled){if(s.checked!=null){this._setCheck(q,s.checked)}this.disableCheckbox(q,1)}q._acc=s.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,t,s,(p?p.id:0))}this.setItemColor(q,s.aCol,s.sCol);if(s.locked=="1"){this.lockItem(q.id,true,true)}if((s.imwidth)||(s.imheight)){this.setIconSize(s.imwidth,s.imheight,q)}if((s.closeable=="0")||(s.closeable=="1")){this.setItemCloseable(q,s.closeable)}var v="";if(s.topoffset){this.setItemTopOffset(q,s.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(t.sub_exists("item")){v=this._parse(t,s.id,1)}}if(v!=""){this.nodeAskingCall=v}t.each("userdata",function(b){this.setUserData(t.get("id"),b.get("name"),b.content())},this)};dhtmlXTreeObject.prototype._parse=function(y,v,A,z){if(this._srnd&&!this.parentObject.offsetHeight){var n=this;return window.setTimeout(function(){n._parse(y,v,A,z)},100)}if(!y.exists()){return}this.skipLock=true;if(!v){v=y.get("id");if(y.get("radio")){this.htmlNode._r_logic=true}this.parsingOn=v;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall=""}var p=this._globalIdStorageFind(v);if(!p){return dhtmlxError.throwError("DataStructure","XML refers to not existing parent")}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((p.childsCount)&&(!z)&&(!this._edsbps)&&(!p._has_top)){var u=p.childNodes[p.childsCount-1]}else{var u=0}this.npl=0;y.each("item",function(a,b){p.XMLload=1;if((this._epgps)&&(this._epgpsC==this.npl)){this._setNextPageSign(p,this.npl+1*(z||0),A,node);return -1}this._parseItem(a,p,u);this.npl++},this,z);if(!A){y.each("userdata",function(a){this.setUserData(y.get("id"),a.get("name"),a.content())},this);p.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var w=p.childsCount-1;w>=0;w--){if(p.childNodes[w]._dmark){this.deleteItem(p.childNodes[w].id)}}}var s=this._globalIdStorageFind(this.parsingOn);for(var w=0;w<this.parsedArray.length;w++){p.htmlNode.childNodes[0].appendChild(this.parsedArray[w])}this.lastLoadedXMLId=v;this.XMLloadingWarning=0;var r=this.setCheckList.split(this.dlmtr);for(var x=0;x<r.length;x++){if(r[x]){this.setCheck(r[x],1)}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(p.id!=this.rootId)){if(p.checkstate===0){this._setSubChecked(0,p)}else{if(p.checkstate===1){this._setSubChecked(1,p)}}}this._redrawFrom(this,null,z);if(y.get("order")&&y.get("order")!="none"){this._reorderBranch(p,y.get("order"),true)}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()])}if(this._branchUpdate){this._branchUpdateNext(y)}}if(this.parsCount==1){this.parsingOn=null;if((!this._edsbps)||(!this._edsbpsA.length)){var t=this;window.setTimeout(function(){t.callEvent("onXLE",[t,v])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;if((this._epgps)&&(z)){this._setPrevPageSign(p,(z||0),A,node)}if(!A&&this.onXLE){this.onXLE(this,v)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(b){b.each("item",function(c){var a=c.get("id");if(this._idpull[a]&&(!this._idpull[a].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(c.get("id"),c)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(d,h){if((d.nodeType==1)&&(d.tagName=="userdata")){var f=d.getAttribute("name");if((f)&&(d.childNodes[0])){this.setUserData(h,f,d.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(m,l,n,k){if(!l){var p=m._globalIdStorageFind(m.lastLoadedXMLId);m.lastLoadedXMLId=-1;if(!p){return 0}}else{p=l}var o=0;for(var q=(n?n-1:0);q<p.childsCount;q++){if((!this._branchUpdate)||(this._getOpenState(p)==1)){if((!l)||(k==1)){p.childNodes[q].htmlNode.parentNode.parentNode.style.display=""}}if(p.childNodes[q].openMe==1){this._openItem(p.childNodes[q]);p.childNodes[q].openMe=0}m._redrawFrom(m,p.childNodes[q])}if((!p.unParsed)&&((p.XMLload)||(!this.XMLsource))){p._acc=o}m._correctLine(p);m._correctPlus(p)};dhtmlXTreeObject.prototype._createSelf=function(){var b=document.createElement("div");b.className="containerTableStyle";b.style.width=this.width;b.style.height=this.height;this.parentObject.appendChild(b);return b};dhtmlXTreeObject.prototype._xcloseAll=function(f){if(f.unParsed){return}if(this.rootId!=f.id){var j=f.htmlNode.childNodes[0].childNodes;var h=j.length;for(var k=1;k<h;k++){j[k].style.display="none"}this._correctPlus(f)}for(var k=0;k<f.childsCount;k++){if(f.childNodes[k].childsCount){this._xcloseAll(f.childNodes[k])}}};dhtmlXTreeObject.prototype._xopenAll=function(d){this._HideShow(d,2);for(var c=0;c<d.childsCount;c++){this._xopenAll(d.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(h){if(!h.htmlNode){return}var m=h.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var k=h.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var j=this.lineArray;if((this.XMLsource)&&(!h.XMLload)){var j=this.plusArray;this._setSrc(k,this.iconURL+h.images[2]);if(this._txtimg){return(m.innerHTML="[+]")}}else{if((h.childsCount)||(h.unParsed)){if((h.htmlNode.childNodes[0].childNodes[1])&&(h.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!h.wsign){var j=this.minusArray}this._setSrc(k,this.iconURL+h.images[1]);if(this._txtimg){return(m.innerHTML="[-]")}}else{if(!h.wsign){var j=this.plusArray}this._setSrc(k,this.iconURL+h.images[2]);if(this._txtimg){return(m.innerHTML="[+]")}}}else{this._setSrc(k,this.iconURL+h.images[0])}}var l=2;if(!h.treeNod.treeLinesOn){this._setSrc(m,this.imPath+j[3])}else{if(h.parentObject){l=this._getCountStatus(h.id,h.parentObject)}this._setSrc(m,this.imPath+j[l])}};dhtmlXTreeObject.prototype._correctLine=function(d){if(!d.htmlNode){return}var f=d.parentObject;if(f){if((this._getLineStatus(d.id,f)==0)||(!this.treeLinesOn)){for(var h=1;h<=d.childsCount;h++){if(!d.htmlNode.childNodes[0].childNodes[h]){break}d.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundImage="";d.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundRepeat=""}}else{for(var h=1;h<=d.childsCount;h++){if(!d.htmlNode.childNodes[0].childNodes[h]){break}d.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";d.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundRepeat="repeat-y"}}}};dhtmlXTreeObject.prototype._getCountStatus=function(c,d){if(d.childsCount<=1){if(d.id==this.rootId){return 4}else{return 0}}if(d.childNodes[0].id==c){if(d.id==this.rootId){return 2}else{return 1}}if(d.childNodes[d.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(c,d){if(d.childNodes[d.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(h,k){if((this.XMLsource)&&(!h.XMLload)){if(k==1){return}h.XMLload=1;this._loadDynXML(h.id);return}var l=h.htmlNode.childNodes[0].childNodes;var j=l.length;if(j>1){if(((l[1].style.display!="none")||(k==1))&&(k!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none"}else{nodestyle=""}for(var m=1;m<j;m++){l[m].style.display=nodestyle}}this._correctPlus(h)};dhtmlXTreeObject.prototype._getOpenState=function(d){var c=d.htmlNode.childNodes[0].childNodes;if(c.length<=1){return 0}if(c[1].style.display!="none"){return 1}else{return -1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onDblClick",[this.parentObject.id,b])){return false}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){b._HideShow(this.parentObject)}else{b._HideShow(this.parentObject,2)}if(b.checkEvent("onOpenEnd")){if(!b.xmlstate){b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}else{b._oie_onXLE.push(b.onXLE);b.onXLE=b._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onOpenStart",[this.parentObject.id,b._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){b._HideShow(this.parentObject)}else{b._HideShow(this.parentObject,2)}if(b.checkEvent("onOpenEnd")){if(!b.xmlstate){b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}else{b._oie_onXLE.push(b.onXLE);b.onXLE=b._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(d,h,f){if(h!=this.rootId){this.callEvent("onOpenEnd",[h,d.getOpenState(h)])}d.onXLE=d._oie_onXLE.pop();if(!f&&!d._oie_onXLE.length){if(d.onXLE){d.onXLE(d,h)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(c){c=c||window.event;var d=this.parentObject.treeNod;d._selectItem(this.parentObject,c)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var c=new Array();for(var d=0;d<this._selected.length;d++){c[d]=this._selected[d].id}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(f,d){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}this._unselectItems();this._markItem(f);if(this.checkEvent("onSelect")){var h=this.getSelectedItemId();if(h!=this._onSSCFold){this.callEvent("onSelect",[h])}}};dhtmlXTreeObject.prototype._markItem=function(b){if(b.scolor){b.span.style.color=b.scolor}b.span.className="selectedTreeRow";b.i_sel=true;this._selected[this._selected.length]=b};dhtmlXTreeObject.prototype.getIndexById=function(c){var d=this._globalIdStorageFind(c);if(!d){return null}return this._getIndex(d)};dhtmlXTreeObject.prototype._getIndex=function(f){var h=f.parentObject;for(var d=0;d<h.childsCount;d++){if(h.childNodes[d]==f){return d}}};dhtmlXTreeObject.prototype._unselectItem=function(c){if((c)&&(c.i_sel)){c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false;for(var d=0;d<this._selected.length;d++){if(!this._selected[d].i_sel){this._selected.splice(d,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var d=0;d<this._selected.length;d++){var c=this._selected[d];c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(n,o,l){n=n||window.event;var j=this.parentObject;if(o){j=o.parentObject}var k=j.treeNod;var m=k.getSelectedItemId();if((!n)||(!n.skipUnSel)){k._selectItem(j,n)}if(!l){if(j.actionHandler){j.actionHandler(j.id,m)}else{k.callEvent("onClick",[j.id,m])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(k){if(!this.tscheck){return}if(!k){return}if(k.id==this.rootId){return}var m=k.childNodes;var h=0;var j=0;if(k.childsCount==0){return}for(var l=0;l<k.childsCount;l++){if(m[l].dscheck){continue}if(m[l].checkstate==0){h=1}else{if(m[l].checkstate==1){j=1}else{h=1;j=1;break}}}if((h)&&(j)){this._setCheck(k,"unsure")}else{if(h){this._setCheck(k,false)}else{this._setCheck(k,true)}}this._correctCheckStates(k.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(b){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(r,s,v){var q=document.createElement("table");q.cellSpacing=0;q.cellPadding=0;q.border=0;if(this.hfMode){q.style.tableLayout="fixed"}q.style.margin=0;q.style.padding=0;var w=document.createElement("tbody");var t=document.createElement("tr");var z=document.createElement("td");z.className="standartTreeImage";if(this._txtimg){var y=document.createElement("div");z.appendChild(y);y.className="dhx_tree_textSign"}else{var y=this._getImg(s.id);y.border="0";if(y.tagName=="IMG"){y.align="absmiddle"}z.appendChild(y);y.style.padding=0;y.style.margin=0;y.style.width=this.def_line_img_x;y.style.height=this.def_line_img_y}var A=document.createElement("td");var u=this._getImg(this.cBROf?this.rootId:s.id);u.checked=0;u.style.width="16px";u.style.height="16px";if(!r){((!_isIE)?A:u).style.display="none"}A.appendChild(u);if((!this.cBROf)&&(u.tagName=="IMG")){u.align="absmiddle"}u.onclick=this.onCheckBoxClick;u.treeNod=this;u.parentObject=s;if(!window._KHTMLrv){A.width="20px"}else{A.width="16px"}var B=document.createElement("td");B.className="standartTreeImage";var x=this._getImg(this.timgen?s.id:this.rootId);x.onmousedown=this._preventNsDrag;x.ondragstart=this._preventNsDrag;x.border="0";if(this._aimgs){x.parentObject=s;if(x.tagName=="IMG"){x.align="absmiddle"}x.onclick=this.onRowSelect}if(!v){this._setSrc(x,this.iconURL+this.imageArray[0])}B.appendChild(x);x.style.padding=0;x.style.margin=0;if(this.timgen){B.style.width=x.style.width=this.def_img_x;x.style.height=this.def_img_y}else{x.style.width="0px";x.style.height="0px";if(_isOpera||window._KHTMLrv){B.style.display="none"}}var C=document.createElement("td");C.className="standartTreeRow";s.span=document.createElement("span");s.span.className="standartTreeRow";if(this.mlitems){s.span.style.width=this.mlitems;s.span.style.display="block"}else{C.noWrap=true}if(_isIE&&_isIE>7){C.style.width="999999px"}else{if(!window._KHTMLrv){C.style.width="100%"}}s.span.innerHTML=s.label;C.appendChild(s.span);C.parentObject=s;z.parentObject=s;C.onclick=this.onRowSelect;z.onclick=this.onRowClick;C.ondblclick=this.onRowClick2;if(this.ettip){t.title=s.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(B,this);B.parentObject=s}this.dragger.addDraggableItem(C,this)}s.span.style.paddingLeft="5px";s.span.style.paddingRight="5px";C.style.verticalAlign="";C.style.fontSize="10pt";C.style.cursor=this.style_pointer;t.appendChild(z);t.appendChild(A);t.appendChild(B);t.appendChild(C);w.appendChild(t);q.appendChild(w);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){t.onmousemove=this._itemMouseIn;t[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut}return q};dhtmlXTreeObject.prototype.setImagePath=function(b){this.imPath=b;this.iconURL=b};dhtmlXTreeObject.prototype.setIconPath=function(b){this.iconURL=b};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(b){this.attachEvent("onRightClick",b)};dhtmlXTreeObject.prototype.setOnClickHandler=function(b){this.attachEvent("onClick",b)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(b){this.attachEvent("onSelect",b)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(b){this.XMLsource=b};dhtmlXTreeObject.prototype.setOnCheckHandler=function(b){this.attachEvent("onCheck",b)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(b){this.attachEvent("onOpenEnd",b)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(b){this.attachEvent("onDblClick",b)};dhtmlXTreeObject.prototype.openAllItems=function(c){var d=this._globalIdStorageFind(c);if(!d){return 0}this._xopenAll(d)};dhtmlXTreeObject.prototype.getOpenState=function(c){var d=this._globalIdStorageFind(c);if(!d){return""}return this._getOpenState(d)};dhtmlXTreeObject.prototype.closeAllItems=function(c){if(c===window.undefined){c=this.rootId}var d=this._globalIdStorageFind(c);if(!d){return 0}this._xcloseAll(d);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(j,f,k){var h=this._globalIdStorageFind(j,0,true);if(!h){return}if(f=="hint"){h.htmlNode.childNodes[0].childNodes[0].title=k}if(typeof(h.userData["t_"+f])=="undefined"){if(!h._userdatalist){h._userdatalist=f}else{h._userdatalist+=","+f}}h.userData["t_"+f]=k};dhtmlXTreeObject.prototype.getUserData=function(h,d){var f=this._globalIdStorageFind(h,0,true);if(!f){return}return f.userData["t_"+d]};dhtmlXTreeObject.prototype.getItemColor=function(h){var f=this._globalIdStorageFind(h);if(!f){return 0}var d=new Object();if(f.acolor){d.acolor=f.acolor}if(f.scolor){d.scolor=f.scolor}return d};dhtmlXTreeObject.prototype.setItemColor=function(k,f,j){if((k)&&(k.span)){var h=k}else{var h=this._globalIdStorageFind(k)}if(!h){return 0}else{if(h.i_sel){if(j){h.span.style.color=j}}else{if(f){h.span.style.color=f}}if(j){h.scolor=j}if(f){h.acolor=f}}};dhtmlXTreeObject.prototype.getItemText=function(c){var d=this._globalIdStorageFind(c);if(!d){return 0}return(d.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(c){var d=this._globalIdStorageFind(c);if((!d)||(!d.parentObject)){return""}return d.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(d,h){if(d==h){return}var f=this._globalIdStorageFind(d);if(!f){return 0}f.id=h;f.span.contextMenuId=h;this._idpull[h]=this._idpull[d];delete this._idpull[d]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c._cimgs=new Array();c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(h){var f=this._globalIdStorageFind(h);if(!f){return 0}for(var d=0;d<this.nodeCut.length;d++){if(this._checkPNodes(f,this.nodeCut[d])){continue}this._moveNode(this.nodeCut[d],f)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(d,c){return this._moveNodeTo(d,c)};dhtmlXTreeObject.prototype._fixNodesCollection=function(n,p){var l=0;var r=0;var o=n.childNodes;var m=n.childsCount-1;if(p==o[m]){return}for(var q=0;q<m;q++){if(o[q]==o[m]){o[q]=o[q+1];o[q+1]=o[m]}}for(var q=0;q<m+1;q++){if(l){var s=o[q];o[q]=l;l=s}else{if(o[q]==p){l=o[q];o[q]=o[m]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(m,r,s,n){var p;var l="";if(s){for(p=0;p<r.childsCount;p++){if(r.childNodes[p]==s){break}}if(p!=0){s=r.childNodes[p-1]}else{l="TOP";s=""}}var o=this._onradh;this._onradh=null;var q=this._attachChildNode(r,m.id,m.label,0,m.images[0],m.images[1],m.images[2],l,0,s);q._userdatalist=m._userdatalist;q.userData=m.userData.clone();q.XMLload=m.XMLload;if(o){this._onradh=o;this._onradh(q.id)}for(var p=0;p<m.childsCount;p++){this._recreateBranch(m.childNodes[p],q,0,1)}return q};dhtmlXTreeObject.prototype._moveNodeTo=function(s,c,t){if(s.treeNod._nonTrivialNode){return s.treeNod._nonTrivialNode(this,c,t,s)}if(c.mytype){var x=(s.treeNod.lWin!=c.lWin)}else{var x=(s.treeNod.lWin!=c.treeNod.lWin)}if(!this.callEvent("onDrag",[s.id,c.id,(t?t.id:null),s.treeNod,c.treeNod])){return false}if((c.XMLload==0)&&(this.XMLsource)){c.XMLload=1;this._loadDynXML(c.id)}this.openItem(c.id);var B=s.treeNod;var v=s.parentObject.childsCount;var u=s.parentObject;if((x)||(B.dpcpy)){var A=s.id;s=this._recreateBranch(s,c,t);if(!B.dpcpy){B.deleteItem(A)}}else{var z=c.childsCount;var r=c.childNodes;if(z==0){c._open=true}B._unselectItem(s);r[z]=s;s.treeNod=c.treeNod;c.childsCount++;var w=this._drawNewTr(r[z].htmlNode);if(!t){c.htmlNode.childNodes[0].appendChild(w);if(this.dadmode==1){this._fixNodesCollection(c,t)}}else{c.htmlNode.childNodes[0].insertBefore(w,t.tr);this._fixNodesCollection(c,t);r=c.childNodes}}if((!B.dpcpy)&&(!x)){var C=s.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){C.parentNode.removeChild(C)},250)}else{s.parentObject.htmlNode.childNodes[0].removeChild(s.tr)}if((!t)||(c!=s.parentObject)){for(var y=0;y<u.childsCount;y++){if(u.childNodes[y].id==s.id){u.childNodes[y]=0;break}}}else{u.childNodes[u.childsCount-1]=0}B._compressChildList(u.childsCount,u.childNodes);u.childsCount--}if((!x)&&(!B.dpcpy)){s.tr=w;w.nodem=s;s.parentObject=c;if(B!=c.treeNod){if(s.treeNod._registerBranch(s,B)){return}this._clearStyles(s);this._redrawFrom(this,s.parentObject)}this._correctPlus(c);this._correctLine(c);this._correctLine(s);this._correctPlus(s);if(t){this._correctPlus(t)}else{if(c.childsCount>=2){this._correctPlus(r[c.childsCount-2]);this._correctLine(r[c.childsCount-2])}}this._correctPlus(r[c.childsCount-1]);if(this.tscheck){this._correctCheckStates(c)}if(B.tscheck){B._correctCheckStates(u)}}if(v>1){B._correctPlus(u.childNodes[v-2]);B._correctLine(u.childNodes[v-2])}B._correctPlus(u);B._correctLine(u);this.callEvent("onDrop",[s.id,c.id,(t?t.id:null),B,c.treeNod]);return s.id};dhtmlXTreeObject.prototype._clearStyles=function(h){if(!h.htmlNode){return}var j=h.htmlNode.childNodes[0].childNodes[0].childNodes[1];var f=j.nextSibling.nextSibling;h.span.innerHTML=h.label;h.i_sel=false;if(h._aimgs){this.dragger.removeDraggableItem(j.nextSibling)}if(this.checkBoxOff){j.childNodes[0].style.display="";j.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(j.childNodes[0],this.imPath+this.checkArray[h.checkstate])}else{j.childNodes[0].style.display="none"}j.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(f);if(this.dragAndDropOff){this.dragger.addDraggableItem(f,this)}if(this._aimgs){this.dragger.addDraggableItem(j.nextSibling,this)}f.childNodes[0].className="standartTreeRow";f.onclick=this.onRowSelect;f.ondblclick=this.onRowClick2;j.previousSibling.onclick=this.onRowClick;this._correctLine(h);this._correctPlus(h);for(var k=0;k<h.childsCount;k++){this._clearStyles(h.childNodes[k])}};dhtmlXTreeObject.prototype._registerBranch=function(d,f){if(f){f._globalIdStorageSub(d.id)}d.id=this._globalIdStorageAdd(d.id,d);d.treeNod=this;for(var h=0;h<d.childsCount;h++){this._registerBranch(d.childNodes[h],f)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(b){this.tscheck=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(b){this.ehlt=true;this.attachEvent("onMouseIn",b)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(b){this.ehlt=true;this.attachEvent("onMouseOut",b)};dhtmlXTreeObject.prototype.enableTreeImages=function(b){this.timgen=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableFixedMode=function(b){this.hfMode=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(c,d){this.checkBoxOff=convertStringToBoolean(c);this.cBROf=(!(this.checkBoxOff||convertStringToBoolean(d)))};dhtmlXTreeObject.prototype.setStdImages=function(f,h,d){this.imageArray[0]=f;this.imageArray[1]=h;this.imageArray[2]=d};dhtmlXTreeObject.prototype.enableTreeLines=function(b){this.treeLinesOn=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setImageArrays=function(n,k,l,m,o,j){switch(n){case"plus":this.plusArray[0]=k;this.plusArray[1]=l;this.plusArray[2]=m;this.plusArray[3]=o;this.plusArray[4]=j;break;case"minus":this.minusArray[0]=k;this.minusArray[1]=l;this.minusArray[2]=m;this.minusArray[3]=o;this.minusArray[4]=j;break}};dhtmlXTreeObject.prototype.openItem=function(c){var d=this._globalIdStorageFind(c);if(!d){return 0}else{return this._openItem(d)}};dhtmlXTreeObject.prototype._openItem=function(d){var c=this._getOpenState(d);if((c<0)||(((this.XMLsource)&&(!d.XMLload)))){if(!this.callEvent("onOpenStart",[d.id,c])){return 0}this._HideShow(d,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,d.id,true)}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[d.id,this._getOpenState(d)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this._srnd){this._HideShow(d,2)}}if(d.parentObject&&!this._skip_open_parent){this._openItem(d.parentObject)}};dhtmlXTreeObject.prototype.closeItem=function(c){if(this.rootId==c){return 0}var d=this._globalIdStorageFind(c);if(!d){return 0}if(d.closeble){this._HideShow(d,1)}};dhtmlXTreeObject.prototype.getLevel=function(c){var d=this._globalIdStorageFind(c);if(!d){return 0}return this._getNodeLevel(d,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(h,f){f=convertStringToBoolean(f);if((h)&&(h.span)){var d=h}else{var d=this._globalIdStorageFind(h)}if(!d){return 0}d.closeble=f};dhtmlXTreeObject.prototype._getNodeLevel=function(d,c){if(d.parentObject){return this._getNodeLevel(d.parentObject,c+1)}return(c)};dhtmlXTreeObject.prototype.hasChildren=function(c){var d=this._globalIdStorageFind(c);if(!d){return 0}else{if((this.XMLsource)&&(!d.XMLload)){return true}else{return d.childsCount}}};dhtmlXTreeObject.prototype._getLeafCount=function(a){var b=0;for(var h=0;h<a.childsCount;h++){if(a.childNodes[h].childsCount==0){b++}}return b};dhtmlXTreeObject.prototype.setItemText=function(j,k,f){var h=this._globalIdStorageFind(j);if(!h){return 0}h.label=k;h.span.innerHTML=k;h.span.parentNode.parentNode.title=f||""};dhtmlXTreeObject.prototype.getItemTooltip=function(c){var d=this._globalIdStorageFind(c);if(!d){return""}return(d.span.parentNode.parentNode._dhx_title||d.span.parentNode.parentNode.title||"")};dhtmlXTreeObject.prototype.refreshItem=function(c){if(!c){c=this.rootId}var d=this._globalIdStorageFind(c);this.deleteChildItems(c);this._loadDynXML(c)};dhtmlXTreeObject.prototype.setItemImage2=function(l,j,k,m){var h=this._globalIdStorageFind(l);if(!h){return 0}h.images[1]=k;h.images[2]=m;h.images[0]=j;this._correctPlus(h)};dhtmlXTreeObject.prototype.setItemImage=function(k,h,j){var f=this._globalIdStorageFind(k);if(!f){return 0}if(j){f.images[1]=h;f.images[2]=j}else{f.images[0]=h}this._correctPlus(f)};dhtmlXTreeObject.prototype.getSubItems=function(h){var f=this._globalIdStorageFind(h,0,1);if(!f){return 0}var d="";for(i=0;i<f.childsCount;i++){if(!d){d=f.childNodes[i].id}else{d+=this.dlmtr+f.childNodes[i].id}}return d};dhtmlXTreeObject.prototype._getAllScraggyItems=function(k){var j="";for(var f=0;f<k.childsCount;f++){if((k.childNodes[f].unParsed)||(k.childNodes[f].childsCount>0)){if(k.childNodes[f].unParsed){var h=this._getAllScraggyItemsXML(k.childNodes[f].unParsed,1)}else{var h=this._getAllScraggyItems(k.childNodes[f])}if(h){if(j){j+=this.dlmtr+h}else{j=h}}}else{if(!j){j=k.childNodes[f].id}else{j+=this.dlmtr+k.childNodes[f].id}}}return j};dhtmlXTreeObject.prototype._getAllFatItems=function(k){var j="";for(var f=0;f<k.childsCount;f++){if((k.childNodes[f].unParsed)||(k.childNodes[f].childsCount>0)){if(!j){j=k.childNodes[f].id}else{j+=this.dlmtr+k.childNodes[f].id}if(k.childNodes[f].unParsed){var h=this._getAllFatItemsXML(k.childNodes[f].unParsed,1)}else{var h=this._getAllFatItems(k.childNodes[f])}if(h){j+=this.dlmtr+h}}}return j};dhtmlXTreeObject.prototype._getAllSubItems=function(l,m,n){if(n){j=n}else{var j=this._globalIdStorageFind(l)}if(!j){return 0}m="";for(var o=0;o<j.childsCount;o++){if(!m){m=j.childNodes[o].id}else{m+=this.dlmtr+j.childNodes[o].id}var k=this._getAllSubItems(0,m,j.childNodes[o]);if(k){m+=this.dlmtr+k}}return m};dhtmlXTreeObject.prototype.selectItem=function(l,m,h){m=convertStringToBoolean(m);var j=this._globalIdStorageFind(l);if((!j)||(!j.parentObject)){return 0}if(this.XMLloadingWarning){j.parentObject.openMe=1}else{this._openItem(j.parentObject)}var k=null;if(h){k=new Object;k.ctrlKey=true;if(j.i_sel){k.skipUnSel=true}}if(m){this.onRowSelect(k,j.htmlNode.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(k,j.htmlNode.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var c=new Array();for(var d=0;d<this._selected.length;d++){c[d]=this._selected[d].span.innerHTML}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(f,h){f--;for(var d=0;d<f;d++){if(h[d]==0){h[d]=h[d+1];h[d+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(o,q,m){if((!q)||(!q.parentObject)){return 0}var u=0;var t=0;if(q.tr.nextSibling){u=q.tr.nextSibling.nodem}if(q.tr.previousSibling){t=q.tr.previousSibling.nodem}var p=q.parentObject;var s=p.childsCount;var n=p.childNodes;for(var r=0;r<s;r++){if(n[r].id==o){if(!m){p.htmlNode.childNodes[0].removeChild(n[r].tr)}n[r]=0;break}}this._compressChildList(s,n);if(!m){p.childsCount--}if(u){this._correctPlus(u);this._correctLine(u)}if(t){this._correctPlus(t);this._correctLine(t)}if(this.tscheck){this._correctCheckStates(p)}if(!m){this._globalIdStorageRecSub(q)}};dhtmlXTreeObject.prototype.setCheck=function(h,d){var f=this._globalIdStorageFind(h,0,1);if(!f){return}if(d==="unsure"){this._setCheck(f,d)}else{d=convertStringToBoolean(d);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(d,f)}else{this._setCheck(f,d)}}if(this.smcheck){this._correctCheckStates(f.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(h,k){if(!h){return}if(((h.parentObject._r_logic)||(this._frbtr))&&(k)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=h}else{for(var f=0;f<h.parentObject.childsCount;f++){this._setCheck(h.parentObject.childNodes[f],0)}}}var j=h.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(k=="unsure"){h.checkstate=2}else{if(k){h.checkstate=1}else{h.checkstate=0}}if(h.dscheck){h.checkstate=h.dscheck}this._setSrc(j,this.imPath+((h.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[h.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(h,d){var f=this._globalIdStorageFind(h);this._setSubChecked(d,f);this._correctCheckStates(f.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(k,h){k=convertStringToBoolean(k);if(!h){return}if(((h.parentObject._r_logic)||(this._frbtr))&&(k)){for(var f=0;f<h.parentObject.childsCount;f++){this._setSubChecked(0,h.parentObject.childNodes[f])}}if(h._r_logic||this._frbtr){this._setSubChecked(k,h.childNodes[0])}else{for(var f=0;f<h.childsCount;f++){this._setSubChecked(k,h.childNodes[f])}}var j=h.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(k){h.checkstate=1}else{h.checkstate=0}if(h.dscheck){h.checkstate=h.dscheck}this._setSrc(j,this.imPath+((h.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[h.checkstate])};dhtmlXTreeObject.prototype.isItemChecked=function(c){var d=this._globalIdStorageFind(c);if(!d){return}return d.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(j){var h=this._globalIdStorageFind(j);if(!h){return}var f=h.childsCount;for(var k=0;k<f;k++){this._deleteNode(h.childNodes[0].id,h.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(h,f){if((!this._onrdlh)||(this._onrdlh(h))){var d=this._deleteItem(h,f)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(l,j,m){j=convertStringToBoolean(j);var k=this._globalIdStorageFind(l);if(!k){return}var o=this.getParentId(l);var n=k.parentObject;this._deleteNode(l,k,m);this._correctPlus(n);this._correctLine(n);if((j)&&(o!=this.rootId)){this.selectItem(o,1)}return n};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(f){for(var d=0;d<f.childsCount;d++){this._globalIdStorageRecSub(f.childNodes[d]);this._globalIdStorageSub(f.childNodes[d].id)}this._globalIdStorageSub(f.id);var h=f;h.span=null;h.tr.nodem=null;h.tr=null;h.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(r,o,p,w,t,u,v,x,y){var s=this._globalIdStorageFind(r);if((!s)||(!s.parentObject)){return(0)}var q=this._attachChildNode(0,o,p,w,t,u,v,x,y,s);return q};dhtmlXTreeObject.prototype.getItemIdByIndex=function(h,f){var d=this._globalIdStorageFind(h);if((!d)||(f>=d.childsCount)){return null}return d.childNodes[f].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(h,f){var d=this._globalIdStorageFind(h);if((!d)||(f>=d.childsCount)){return null}return d.childNodes[f].id};dhtmlXTreeObject.prototype.setDragHandler=function(b){this.attachEvent("onDrag",b)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null}this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(c,d){if(c=="temporary_disabled"){this.dADTempOff=false;c=true}else{this.dADTempOff=true}this.dragAndDropOff=convertStringToBoolean(c);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this)}if(arguments.length>1){this._ddronr=(!convertStringToBoolean(d))}};dhtmlXTreeObject.prototype._setMove=function(m,o,l){if(m.parentObject.span){var n=getAbsoluteTop(m);var j=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;var k=m.parentObject.span;k.className+=" dragAndDropRow";this._lastMark=k;this._autoScroll(null,n,j)}};dhtmlXTreeObject.prototype._autoScroll=function(h,d,f){if(this.autoScroll){if(h){d=getAbsoluteTop(h);f=getAbsoluteTop(this.allTree)}if((d-f-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if((d-f)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(m,n){if(!this.dADTempOff){return null}var o=m.parentObject;if(!this.callEvent("onBeforeDrag",[o.id])){return null}if(!o.i_sel){this._selectItem(o,n)}var j=document.createElement("div");var l=new Array();if(this._itim_dg){for(var k=0;k<this._selected.length;k++){l[k]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[k].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[k].span.innerHTML+"</td></tr></table>"}}else{l=this.getSelectedItemText().split(this.dlmtr)}j.innerHTML=l.join("");j.style.position="absolute";j.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return j};dhtmlXTreeObject.prototype._focusNode=function(d){var c=getAbsoluteTop(d.htmlNode)-getAbsoluteTop(this.allTree);if((c>(this.allTree.scrollTop+this.allTree.offsetHeight-30))||(c<this.allTree.scrollTop)){this.allTree.scrollTop=c}};dhtmlXTreeObject.prototype._preventNsDrag=function(b){if((b)&&(b.preventDefault)){b.preventDefault();return false}return false};dhtmlXTreeObject.prototype._drag=function(o,n,m){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!m.parentObject){m=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var p=o.parentObject.treeNod;if((p)&&(p._clearMove)){p._clearMove("")}if((!this.dragMove)||(this.dragMove())){if((!p)||(!p._clearMove)||(!p._dragged)){var r=new Array(o.parentObject)}else{var r=p._dragged}var l=m.parentObject;for(var q=0;q<r.length;q++){var s=this._moveNode(r[q],l);if((this.dadmodec)&&(s!==false)){l=this._globalIdStorageFind(s,true,true)}if((s)&&(!this._sADnD)){this.selectItem(s,0,1)}}}if(p){p._dragged=new Array()}};dhtmlXTreeObject.prototype._dragIn=function(p,r,m,n){if(!this.dADTempOff){return 0}var o=r.parentObject;var l=p.parentObject;if((!l)&&(this._ddronr)){return}if(!this.callEvent("onDragIn",[o.id,l?l.id:null,o.treeNod,this])){if(l){this._autoScroll(p)}return 0}if(!l){this.allTree.className+=" selectionBox"}else{if(o.childNodes==null){this._setMove(p,m,n);return p}var q=o.treeNod;for(var s=0;s<q._dragged.length;s++){if(this._checkPNodes(l,q._dragged[s])){this._autoScroll(p);return 0}}this._setMove(p,m,n);if(this._getOpenState(l)<=0){this._autoOpenId=l.id;this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000)}}return p};dhtmlXTreeObject.prototype._autoOpenItem=function(c,d){d.openItem(d._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(b){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype.moveItem=function(n,o,s,l){var m=this._globalIdStorageFind(n);if(!m){return(0)}switch(o){case"right":alert("Not supported yet");break;case"item_child":var q=(l||this)._globalIdStorageFind(s);if(!q){return(0)}(l||this)._moveNodeTo(m,q,0);break;case"item_sibling":var q=(l||this)._globalIdStorageFind(s);if(!q){return(0)}(l||this)._moveNodeTo(m,q.parentObject,q);break;case"item_sibling_next":var q=(l||this)._globalIdStorageFind(s);if(!q){return(0)}if((q.tr)&&(q.tr.nextSibling)&&(q.tr.nextSibling.nodem)){(l||this)._moveNodeTo(m,q.parentObject,q.tr.nextSibling.nodem)}else{(l||this)._moveNodeTo(m,q.parentObject)}break;case"left":if(m.parentObject.parentObject){this._moveNodeTo(m,m.parentObject.parentObject,m.parentObject)}break;case"up":var p=this._getPrevNode(m);if((p==-1)||(!p.parentObject)){return}this._moveNodeTo(m,p.parentObject,p);break;case"up_strict":var p=this._getIndex(m);if(p!=0){this._moveNodeTo(m,m.parentObject,m.parentObject.childNodes[p-1])}break;case"down_strict":var p=this._getIndex(m);var r=m.parentObject.childsCount-2;if(p==r){this._moveNodeTo(m,m.parentObject)}else{if(p<r){this._moveNodeTo(m,m.parentObject,m.parentObject.childNodes[p+2])}}break;case"down":var p=this._getNextNode(this._lastChild(m));if((p==-1)||(!p.parentObject)){return}if(p.parentObject==m.parentObject){var p=this._getNextNode(p)}if(p==-1){this._moveNodeTo(m,m.parentObject)}else{if((p==-1)||(!p.parentObject)){return}this._moveNodeTo(m,p.parentObject,p)}break}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}};dhtmlXTreeObject.prototype._loadDynXML=function(h,d){d=d||this.XMLsource;var f=(new Date()).valueOf();this._ld_id=h;this.loadXML(d+getUrlSymbol(d)+"uid="+f+"&id="+this._escape(h))};dhtmlXTreeObject.prototype._checkPNodes=function(c,d){if(d==c){return 1}if(c.parentObject){return this._checkPNodes(c.parentObject,d)}else{return 0}};dhtmlXTreeObject.prototype.preventIECaching=function(b){this.no_cashe=convertStringToBoolean(b);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(h,d){if(typeof(h)!="object"){var f=this._globalIdStorageFind(h,0,1)}else{var f=h}if(!f){return}f.dscheck=convertStringToBoolean(d)?(((f.checkstate||0)%3)+3):((f.checkstate>2)?(f.checkstate-3):f.checkstate);this._setCheck(f);if(f.dscheck<3){f.dscheck=false}};dhtmlXTreeObject.prototype.setEscapingMode=function(b){this.utfesc=b};dhtmlXTreeObject.prototype.enableHighlighting=function(b){this.ehlt=true;this.ehlta=convertStringToBoolean(b)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var c=this.childNodes[3].parentObject;var d=c.treeNod;d.callEvent("onMouseOut",[c.id]);if(c.id==d._l_onMSI){d._l_onMSI=null}if(!d.ehlta){return}c.span.className=c.span.className.replace("_lor","")};dhtmlXTreeObject.prototype._itemMouseIn=function(){var c=this.childNodes[3].parentObject;var d=c.treeNod;if(d._l_onMSI!=c.id){d.callEvent("onMouseIn",[c.id])}d._l_onMSI=c.id;if(!d.ehlta){return}c.span.className=c.span.className.replace("_lor","");c.span.className=c.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(b){this._aimgs=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.focusItem=function(c){var d=this._globalIdStorageFind(c);if(!d){return(0)}this._focusNode(d)};dhtmlXTreeObject.prototype.getAllSubItems=function(b){return this._getAllSubItems(b)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(k){var j="";for(var f=0;f<k.childsCount;f++){if((k.childNodes[f].unParsed)||(k.childNodes[f].childsCount>0)){if(k.childNodes[f].unParsed){var h=this._getAllScraggyItemsXML(k.childNodes[f].unParsed,1)}else{var h=this._getAllScraggyItems(k.childNodes[f])}if(h){if(j){j+=this.dlmtr+h}else{j=h}}}else{if(!j){j=k.childNodes[f].id}else{j+=this.dlmtr+k.childNodes[f].id}}}return j};dhtmlXTreeObject.prototype._getAllFatItems=function(k){var j="";for(var f=0;f<k.childsCount;f++){if((k.childNodes[f].unParsed)||(k.childNodes[f].childsCount>0)){if(!j){j=k.childNodes[f].id}else{j+=this.dlmtr+k.childNodes[f].id}if(k.childNodes[f].unParsed){var h=this._getAllFatItemsXML(k.childNodes[f].unParsed,1)}else{var h=this._getAllFatItems(k.childNodes[f])}if(h){j+=this.dlmtr+h}}}return j};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(b){if(b){b=this._globalIdStorageFind(b)}return this._getAllChecked(b,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var b=this._getAllChecked("","",1);if(b!=""){b+=this.dlmtr}return b+this._getAllChecked("","",2)};dhtmlXTreeObject.prototype._getAllChecked=function(l,m,k){if(!l){l=this.htmlNode}if(l.checkstate==k){if(!l.nocheckbox){if(m){m+=this.dlmtr+l.id}else{m=l.id}}}var j=l.childsCount;for(var h=0;h<j;h++){m=this._getAllChecked(l.childNodes[h],m,k)}if(m){return m}else{return""}};dhtmlXTreeObject.prototype.setItemStyle=function(j,k,f){var f=f||false;var h=this._globalIdStorageFind(j);if(!h){return 0}if(!h.span.style.cssText){h.span.setAttribute("style",h.span.getAttribute("style")+"; "+k)}else{h.span.style.cssText=f?k:h.span.style.cssText+";"+k}};dhtmlXTreeObject.prototype.enableImageDrag=function(b){this._itim_dg=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnDragIn=function(b){this.attachEvent("onDragIn",b)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(b){this.autoScroll=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setSkin=function(d){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+d};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(b){return[b.parent,(b.width||"100%"),(b.height||"100%"),(b.root_id||0)]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(b){this.initSWFUpload(b)}}SWFUpload.prototype.initSWFUpload=function(c){try{this.customSettings={};this.settings=c;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(f){if(typeof(f)!=="string"||f.match(/^https?:\/\//i)||f.match(/^\//)){return f}var h=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var d=window.location.pathname.lastIndexOf("/");if(d<=0){path="/"}else{path=window.location.pathname.substr(0,d)+"/"}return path+f};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(c,d){this.settings[c]=(this.settings[c]==undefined)?d:this.settings[c]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var d,c;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}d=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(d==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}c=document.createElement("div");c.innerHTML=this.getFlashHTML();d.parentNode.replaceChild(c.firstChild,d);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var c=this.buildParamString();var d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(c),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var h=this.settings.post_params;var d=[];if(typeof(h)==="object"){for(var f in h){if(h.hasOwnProperty(f)){d.push(encodeURIComponent(f.toString())+"="+encodeURIComponent(h[f].toString()))}}}return d.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var j=null;j=this.getMovieElement();if(j&&typeof(j.CallFunction)==="unknown"){for(var m in j){try{if(typeof(j[m])==="function"){j[m]=null}}catch(k){}}try{j.parentNode.removeChild(j)}catch(h){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(l){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(d,h,f){if(h==undefined){return(this.settings[d]=f)}else{return(this.settings[d]=h)}};SWFUpload.prototype.getSetting=function(b){if(this.settings[b]!=undefined){return this.settings[b]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(b){this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelUpload=function(d,c){if(c!==false){c=true}this.callFlash("CancelUpload",[d,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(b){this.callFlash("SetStats",[b])};SWFUpload.prototype.getFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.addFileParam=function(f,d,h){return this.callFlash("AddFileParam",[f,d,h])};SWFUpload.prototype.removeFileParam=function(d,c){this.callFlash("RemoveFileParam",[d,c])};SWFUpload.prototype.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};SWFUpload.prototype.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};SWFUpload.prototype.addPostParam=function(d,c){this.settings.post_params[d]=c;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(d,c){this.settings.file_types=d;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[d,c])};SWFUpload.prototype.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};SWFUpload.prototype.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};SWFUpload.prototype.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};SWFUpload.prototype.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};SWFUpload.prototype.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};SWFUpload.prototype.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};SWFUpload.prototype.setHTTPSuccess=function(b){if(typeof b==="string"){b=b.replace(" ","").split(",")}this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};SWFUpload.prototype.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};SWFUpload.prototype.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};SWFUpload.prototype.setButtonImageURL=function(b){if(b==undefined){b=""}this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};SWFUpload.prototype.setButtonDimensions=function(h,f){this.settings.button_width=h;this.settings.button_height=f;var d=this.getMovieElement();if(d!=undefined){d.style.width=h+"px";d.style.height=f+"px"}this.callFlash("SetButtonDimensions",[h,f])};SWFUpload.prototype.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};SWFUpload.prototype.setButtonTextPadding=function(c,d){this.settings.button_text_top_padding=d;this.settings.button_text_left_padding=c;this.callFlash("SetButtonTextPadding",[c,d])};SWFUpload.prototype.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};SWFUpload.prototype.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};SWFUpload.prototype.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};SWFUpload.prototype.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};SWFUpload.prototype.queueEvent=function(d,h){if(h==undefined){h=[]}else{if(!(h instanceof Array)){h=[h]}}var f=this;if(typeof this.settings[d]==="function"){this.eventQueue.push(function(){this.settings[d].apply(this,h)});setTimeout(function(){f.executeNextEvent()},0)}else{if(this.settings[d]!==null){throw"Event handler "+d+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;if(typeof(b)==="function"){b.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(o){var m=/[$]([0-9a-f]{4})/i;var l={};var n;if(o!=undefined){for(var k in o.post){if(o.post.hasOwnProperty(k)){n=k;var j;while((j=m.exec(n))!==null){n=n.replace(j[0],String.fromCharCode(parseInt("0x"+j[1],16)))}l[n]=o.post[k]}}o.post=l}return o};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};SWFUpload.prototype.flashReady=function(){var b=this.getMovieElement();if(!b){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(h){try{if(this.movieElement&&typeof(h.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var k in h){try{if(typeof(h[k])==="function"){h[k]=null}}catch(f){}}}}catch(j){}window.__flash__removeCallback=function(c,b){try{if(c){c[b]=null}}catch(a){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};SWFUpload.prototype.fileQueueError=function(f,h,d){f=this.unescapeFilePostParams(f);this.queueEvent("file_queue_error_handler",[f,h,d])};SWFUpload.prototype.fileDialogComplete=function(d,h,f){this.queueEvent("file_dialog_complete_handler",[d,h,f])};SWFUpload.prototype.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};SWFUpload.prototype.returnUploadStart=function(d){var c;if(typeof this.settings.upload_start_handler==="function"){d=this.unescapeFilePostParams(d);c=this.settings.upload_start_handler.call(this,d)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(c===undefined){c=true}c=!!c;this.callFlash("ReturnUploadStart",[c])};SWFUpload.prototype.uploadProgress=function(f,h,d){f=this.unescapeFilePostParams(f);this.queueEvent("upload_progress_handler",[f,h,d])};SWFUpload.prototype.uploadError=function(f,h,d){f=this.unescapeFilePostParams(f);this.queueEvent("upload_error_handler",[f,h,d])};SWFUpload.prototype.uploadSuccess=function(d,f,h){d=this.unescapeFilePostParams(d);this.queueEvent("upload_success_handler",[d,f,h])};SWFUpload.prototype.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};SWFUpload.prototype.debug=function(b){this.queueEvent("debug_handler",b)};SWFUpload.prototype.debugMessage=function(k){if(this.settings.debug){var h,j=[];if(typeof k==="object"&&typeof k.name==="string"&&typeof k.message==="string"){for(var f in k){if(k.hasOwnProperty(f)){j.push(f+": "+k[f])}}h=j.join("\n")||"";j=h.split("\n");h="EXCEPTION: "+j.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(h)}else{SWFUpload.Console.writeLine(k)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(j){var f,h;try{f=document.getElementById("SWFUpload_Console");if(!f){h=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(h);f=document.createElement("textarea");f.id="SWFUpload_Console";f.style.fontFamily="monospace";f.setAttribute("wrap","off");f.wrap="off";f.style.overflow="auto";f.style.width="700px";f.style.height="350px";f.style.margin="5px";h.appendChild(f)}f.value+=j+"\n";f.scrollTop=f.scrollHeight-f.clientHeight}catch(k){alert("Exception: "+k.name+" Message: "+k.message)}};var SWFUpload;if(typeof(SWFUpload)==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=(function(b){return function(){if(typeof(b)==="function"){b.call(this)}this.queueSettings={};this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}})(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(b){this.queueSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=true;this.stopUpload();var b=this.getStats();while(b.files_queued>0){this.cancelUpload();b=this.getStats()}};SWFUpload.queue.uploadStartHandler=function(d){var c;if(typeof(this.queueSettings.user_upload_start_handler)==="function"){c=this.queueSettings.user_upload_start_handler.call(this,d)}c=(c===false)?false:true;this.queueSettings.queue_cancelled_flag=!c;return c};SWFUpload.queue.uploadCompleteHandler=function(f){var k=this.queueSettings.user_upload_complete_handler;var j;if(f.filestatus===SWFUpload.FILE_STATUS.COMPLETE){this.queueSettings.queue_upload_count++}if(typeof(k)==="function"){j=(k.call(this,f)===false)?false:true}else{if(f.filestatus===SWFUpload.FILE_STATUS.QUEUED){j=false}else{j=true}}if(j){var h=this.getStats();if(h.files_queued>0&&this.queueSettings.queue_cancelled_flag===false){this.startUpload()}else{if(this.queueSettings.queue_cancelled_flag===false){this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]);this.queueSettings.queue_upload_count=0}else{this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0}}}}}function FileProgress(o,k){this.fileProgressID=o.id;this.opacity=100;this.height=0;this.fileProgressWrapper=document.getElementById(this.fileProgressID);if(!this.fileProgressWrapper){this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var l=document.createElement("a");l.className="progressCancel";l.href="#";l.style.visibility="hidden";l.appendChild(document.createTextNode(" "));var j=document.createElement("div");j.className="progressName";j.appendChild(document.createTextNode(o.name));var m=document.createElement("div");m.className="progressBarInProgress";var n=document.createElement("div");n.className="progressBarStatus";n.innerHTML="&nbsp;";this.fileProgressElement.appendChild(l);this.fileProgressElement.appendChild(j);this.fileProgressElement.appendChild(n);this.fileProgressElement.appendChild(m);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(k).appendChild(this.fileProgressWrapper)}else{this.fileProgressElement=this.fileProgressWrapper.firstChild;this.reset()}this.height=this.fileProgressWrapper.offsetHeight;this.setTimer(null)}FileProgress.prototype.setTimer=function(b){this.fileProgressElement.FP_TIMER=b};FileProgress.prototype.getTimer=function(b){return this.fileProgressElement.FP_TIMER||null};FileProgress.prototype.reset=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[2].innerHTML="&nbsp;";this.fileProgressElement.childNodes[2].className="progressBarStatus";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width="0%";this.appear()};FileProgress.prototype.setProgress=function(b){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=b+"%";this.appear()};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},2000))};FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},5000))};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var b=this;this.setTimer(setTimeout(function(){b.disappear()},2000))};FileProgress.prototype.setStatus=function(b){this.fileProgressElement.childNodes[2].innerHTML=b};FileProgress.prototype.toggleCancel=function(d,h){this.fileProgressElement.childNodes[0].style.visibility=d?"visible":"hidden";if(h){var f=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){h.cancelUpload(f);return false}}};FileProgress.prototype.appear=function(){if(this.getTimer()!==null){clearTimeout(this.getTimer());this.setTimer(null)}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(b){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"}}else{this.fileProgressWrapper.style.opacity=1}this.fileProgressWrapper.style.height="";this.height=this.fileProgressWrapper.offsetHeight;this.opacity=100;this.fileProgressWrapper.style.display=""};FileProgress.prototype.disappear=function(){var k=15;var m=4;var h=10;if(this.opacity>0){this.opacity-=k;if(this.opacity<0){this.opacity=0}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(l){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}}else{this.fileProgressWrapper.style.opacity=this.opacity/100}}if(this.height>0){this.height-=m;if(this.height<0){this.height=0}this.fileProgressWrapper.style.height=this.height+"px"}if(this.height>0||this.opacity>0){var j=this;this.setTimer(setTimeout(function(){j.disappear()},h))}else{this.fileProgressWrapper.style.display="none";this.setTimer(null)}};function fileQueued(h){try{var f=new FileProgress(h,this.customSettings.progressTarget);f.setStatus("Pending...");f.toggleCancel(true,this)}catch(d){this.debug(d)}}function fileQueueError(m,k,l){try{if(k===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){alert("You have attempted to queue too many files.\n"+(l===0?"You have reached the upload limit.":"You may select "+(l>1?"up to "+l+" files.":"one file.")));return}var j=new FileProgress(m,this.customSettings.progressTarget);j.setError();j.toggleCancel(false);switch(k){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:j.setStatus("File is too big.");this.debug("Error Code: File too big, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:j.setStatus("Cannot upload Zero Byte files.");this.debug("Error Code: Zero byte file, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:j.setStatus("Invalid File Type.");this.debug("Error Code: Invalid File Type, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;default:if(m!==null){j.setStatus("Unhandled Error")}this.debug("Error Code: "+k+", File name: "+m.name+", File size: "+m.size+", Message: "+l);break}}catch(h){this.debug(h)}}function fileDialogComplete(f,h){try{if(f>0){document.getElementById(this.customSettings.cancelButtonId).disabled=false}showHideQueueBox.call(this,"block");this.startUpload()}catch(d){this.debug(d)}}function showHideQueueBox(d){var h=this.customSettings.queueBox?this.customSettings.queueBox:null;if(h&&document.getElementById(h)){var f=document.getElementById("QueueBox");f.style.display=d}}function uploadStart(h){try{var f=new FileProgress(h,this.customSettings.progressTarget);f.setStatus("Uploading...");f.toggleCancel(true,this)}catch(d){}return true}function uploadProgress(o,l,m){try{var n=Math.ceil((l/m)*100);var k=new FileProgress(o,this.customSettings.progressTarget);k.setProgress(n);k.setStatus("Uploading...")}catch(j){this.debug(j)}}function uploadSuccess(k,m){try{var h=new FileProgress(k,this.customSettings.progressTarget);h.setComplete();h.setStatus("Complete.");h.toggleCancel(false);var j=this;setTimeout(function(){showHideQueueBox.call(j,"none")},3000)}catch(l){this.debug(l)}}function uploadError(m,k,l){try{var j=new FileProgress(m,this.customSettings.progressTarget);j.setError();j.toggleCancel(false);switch(k){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:j.setStatus("Upload Error: "+l);this.debug("Error Code: HTTP Error, File name: "+m.name+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:j.setStatus("Upload Failed.");this.debug("Error Code: Upload Failed, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:j.setStatus("Server (IO) Error");this.debug("Error Code: IO Error, File name: "+m.name+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:j.setStatus("Security Error");this.debug("Error Code: Security Error, File name: "+m.name+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:j.setStatus("Upload limit exceeded.");this.debug("Error Code: Upload Limit Exceeded, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:j.setStatus("Failed Validation.  Upload skipped.");this.debug("Error Code: File Validation Failed, File name: "+m.name+", File size: "+m.size+", Message: "+l);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}j.setStatus("Cancelled");j.setCancelled();break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:j.setStatus("Stopped");break;default:j.setStatus("Unhandled Error: "+k);this.debug("Error Code: "+k+", File name: "+m.name+", File size: "+m.size+", Message: "+l);break}}catch(h){this.debug(h)}}function uploadComplete(b){if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}}function queueComplete(c){var d=document.getElementById("divStatus");d.innerHTML=c+" file"+(c===1?"":"s")+" uploaded."};